---
layout: post
title: oneframe 设计 v0.1版
description: oneframe 是一个使用PHP写的一个web框架，初期会学习一些CI的设计思路，后期可能加入很多自己的想法。正式版之前采用0.x版本号。此文仅记录初步构想。
keywords: oneframe,PHP框架,框架设计
---

## 整体构架

1. 采用单一入口为index.php 。
2. 两个目录，一个目录定义为sys,主要放置框架核心文件；一个目录定义为app,默认情况下预定义三个空目录为c,m,v分别放置控制器，模型，视图，也可以自定义目录，用于放置其他类，如完成逻辑层的service或者公用类等，这些类可通过类加载方式加载进去；另还有config.php文件用于添加修改框架的配置数据。定义为sys的文件夹原则上是不需要修改的文件，定义为app的文件夹是开发人员主要使用的目录。
3. 系统流程参见下方的“基本流程”。
4. 系统定义的各种类如数据库操作类等，可通过load的方式加载进来。

## 基本流程

1. 使用单一入口，入口文件名为index.php 。
2. 进入入口文件后，首先加载common类，common是一些公用的方法。
3. 加载配置类。
4. 加载URL处理类，处理结果是找到控制器目录以及代表控制器的类和方法。
5. 加载路由类，负责处理是否有自定义路由。
6. 加载input类，主要处理$_GET,$_POST数据。
7. 加载ouput类，负责生成返回的html字符串，并且检测是否需要处理缓存问题。
8. 输出

## 补充

1. 在此版完成的后应考虑增加安全类，负责处理用户的输入数据。
2. 是否考虑增加挂钩点，用于后期增加扩展使用。
3. 是否需要增加系统基准测试类,能够用来计算两个标记点的时间差。
